<!DOCTYPE html><html lang="zh-Hans"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> 运维笔记</title><meta name="description" content="略懂一点编程."><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.ico"><link rel="stylesheet" href="/css/prontera.css"><link rel="search" type="application/opensearchdescription+xml" href="https://blog.qzcool.xyz/atom.xml" title="运维笔记"><link rel="alternate" href="/atom.xml" title="运维笔记" type="application/atom+xml">
</head><body><header class="feature-header"><nav class="component-nav"><ul><div class="logo-container"><a href="/"><h2 class="title">运维笔记</h2></a></div><a href="/" target="_self" class="li component-nav-item"><p class="selected">INDEX</p></a><a href="/archives" target="_self" class="li component-nav-item"><p>ARCHIVES</p></a><ul class="shortcut-icons"><a href="https://github.com/fredliu168" target="_blank"><img src="/images/github.svg" class="icon"></a><a href="/atom.xml" target="_blank"><img src="/images/rss.svg" class="icon"></a></ul></ul></nav></header><main class="container"><div id="body-container"><div id="post-list" class="left"><div class="home post-list"><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2022/03/03/Mac下运行-bin文件/" class="post-title-link">Mac下运行.bin文件</a></h2><div class="post-info">Mar 3, 2022</div><div class="post-content"></div><a href="/2022/03/03/Mac下运行-bin文件/" class="read-more">READ MORE</a></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2022/02/24/Mac使用WireShark和Ettercap抓同一局域网设备数据包/" class="post-title-link">Mac使用WireShark和Ettercap抓同一局域网设备数据包</a></h2><div class="post-info">Feb 24, 2022</div><div class="post-content"></div><a href="/2022/02/24/Mac使用WireShark和Ettercap抓同一局域网设备数据包/" class="read-more">READ MORE</a></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2021/11/17/RSA加密在Vue和Python中的使用/" class="post-title-link">RSA加密在Vue和Python中的使用</a></h2><div class="post-info">Nov 17, 2021</div><div class="post-content"></div><a href="/2021/11/17/RSA加密在Vue和Python中的使用/" class="read-more">READ MORE</a></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2021/10/21/nginx安全配置/" class="post-title-link">nginx安全配置</a></h2><div class="post-info">Oct 21, 2021</div><div class="post-content"><h1 id="如何避免CRLF注入攻击配置"><a href="#如何避免CRLF注入攻击配置" class="headerlink" title="如何避免CRLF注入攻击配置"></a>如何避免CRLF注入攻击配置</h1><p>CR 和 LF 字符将在 $request_uri 中编码为 %0D%0A。<br> 可以通过在服务器块顶部附近放置一个 if 块来检测它们：  </p>
<figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">if</span> ( <span class="variable">$request_uri</span> <span class="regexp">~* "%0A|%0D"</span> ) </span><br><span class="line">&#123; </span><br><span class="line">    <span class="attribute">return</span> <span class="number">403</span>; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><a href="/2021/10/21/nginx安全配置/" class="read-more">READ MORE</a></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2021/10/19/MacOs内外网自动切换脚本/" class="post-title-link">MacOs内外网自动切换脚本</a></h2><div class="post-info">Oct 19, 2021</div><div class="post-content"><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># chmod +x ./switch_net.sh  使脚本具有执行权限</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"#################################"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"#网络切换，1:OA，2:Wlan"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"#请输入需要切换的网络，回车默认Wlan，IP获取为DHCP模式"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"#################################"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span>  -p <span class="string">"please enter you choise: "</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">"<span class="variable">$REPLY</span>"</span> == 1 ]]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"网络切换为OA"</span></span><br><span class="line">  sudo ifconfig en10 ether 11:1C:29:1A:12:AD</span><br><span class="line">  networksetup -setmanual <span class="string">"AX88179 USB 3.0 to Gigabit Ethernet"</span> 110.149.197.269 255.255.255.0 </span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"切换成功"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"网络切换为Wlan"</span></span><br><span class="line">  sudo networksetup -setdhcp <span class="string">"AX88179 USB 3.0 to Gigabit Ethernet"</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"切换成功"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>执行以下语句使脚本具有执行权限<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x ./switch_net.sh</span><br></pre></td></tr></table></figure></p></div><a href="/2021/10/19/MacOs内外网自动切换脚本/" class="read-more">READ MORE</a></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2021/10/19/Nginx废除支持TSL1-0和TSL1-1导致Python3网络请求时出现CERTIFICATE-VERIFY-FAILED处理/" class="post-title-link">Nginx废除支持TSL1.0和TSL1.1导致Python3网络请求时出现CERTIFICATE_VERIFY_FAILED处理</a></h2><div class="post-info">Oct 19, 2021</div><div class="post-content"></div><a href="/2021/10/19/Nginx废除支持TSL1-0和TSL1-1导致Python3网络请求时出现CERTIFICATE-VERIFY-FAILED处理/" class="read-more">READ MORE</a></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2021/08/26/Quantumult屏蔽掌上公交广告配置/" class="post-title-link">Quantumult屏蔽掌上公交广告配置</a></h2><div class="post-info">Aug 26, 2021</div><div class="post-content"><p>掌上公交提供了实时的公交查询,功能做的挺好的,就是广告超级多,体验超级差,有开屏广告,弹窗广告,后台却换广告,暂时没找到可以替代的软件,而已没有提供会员去广告的功能,希望该软件能出一个会员免广告版本,我可以考虑充个会员,无奈只能想办法怎么去屏蔽一下广告,经过摸索发现Quantumult可以设置屏蔽相关站点.瞬间清爽了,设置如下.</p>
<p>[TCP]<br>HOST,api-access.pangolin-sdk-toutiao.com,REJECT<br>HOST,telemetry.sdk.inmobi.cn,REJECT<br>HOST,dg.k.jd.com,REJECT<br>HOST,kepler.jd.com,REJECT<br>HOST,baichuan-sdk.taobao.com,REJECT<br>HOST,qzs.qq.com,REJECT<br>HOST,cpu-openapi.baidu.com,REJECT<br>HOST,log-api.pangolin-sdk-toutiao.com,REJECT<br>HOST,caclick.baidu.com,REJECT<br>HOST,publish-pic-cpu.baidu.com,REJECT<br>IP-CIDR,112.49.27.244/24,REJECT<br>HOST,<a href="http://www.huyue.best,REJECT" target="_blank" rel="noopener">www.huyue.best,REJECT</a><br>HOST,toblog.ctobsnssdk.com,REJECT<br>HOST,mobads.baidu.com,REJECT<br>HOST,mobads-logs.baidu.com,REJECT<br>HOST,sf3-fe-tos.pglstatp-toutiao.com,REJECT<br>HOST,ulogs.umengcloud.com,REJECT<br>HOST,mi.gdt.qq.com,REJECT<br>HOST,ulogs.umeng.com,REJECT<br>HOST,v2.gdt.qq.com,REJECT<br>HOST,errlog.umeng.com,REJECT<br>HOST,ios.bugly.qq.com,REJECT<br>HOST,sdk.e.qq.com,REJECT<br>HOST,userlink.alicdn.com,REJECT<br>HOST,api.lytaohuitao.com,REJECT<br>HOST,audid-api.taobao.com,REJECT<br>HOST,sdkm.w.inmobi.cn,REJECT<br>HOST,adashbc.ut.taobao.com,REJECT</p></div><a href="/2021/08/26/Quantumult屏蔽掌上公交广告配置/" class="read-more">READ MORE</a></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2021/08/03/nginx设置https/" class="post-title-link">nginx设置https</a></h2><div class="post-info">Aug 3, 2021</div><div class="post-content"><h2 id="SSH-into-the-server"><a href="#SSH-into-the-server" class="headerlink" title="SSH into the server"></a>SSH into the server</h2><p>SSH into the server running your HTTP website as a user with sudo privileges.</p>
<h2 id="Install-snapd"><a href="#Install-snapd" class="headerlink" title="Install snapd"></a>Install snapd</h2><p>You’ll need to install snapd and make sure you follow any instructions to enable classic snap support.<br>Follow these instructions on snapcraft’s site to install snapd.</p>
<p>Ensure that your version of snapd is up to date<br>Execute the following instructions on the command line on the machine to ensure that you have the latest version of snapd.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">sudo snap install core; </span><br><span class="line"></span><br><span class="line">sudo snap refresh core</span><br></pre></td></tr></table></figure>
<p>Remove certbot-auto and any Certbot OS packages<br>If you have any Certbot packages installed using an OS package manager like apt, dnf, or yum, you should remove them before installing the Certbot snap to ensure that when you run the command certbot the snap is used rather than the installation from your OS package manager. The exact command to do this depends on your OS, but common examples are sudo apt-get remove certbot, sudo dnf remove certbot, or sudo yum remove certbot.</p>
<p>If you previously used Certbot through the certbot-auto script, you should also remove its installation by following the instructions here.</p>
<h2 id="Install-Certbot"><a href="#Install-Certbot" class="headerlink" title="Install Certbot"></a>Install Certbot</h2><p>Run this command on the command line on the machine to install Certbot.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo snap install --classic certbot</span><br></pre></td></tr></table></figure></p>
<p>Prepare the Certbot command<br>Execute the following instruction on the command line on the machine to ensure that the certbot command can be run.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ln -s /snap/bin/certbot /usr/bin/certbot</span><br></pre></td></tr></table></figure></p>
<p>Choose how you’d like to run Certbot<br>Either get and install your certificates…<br>Run this command to get a certificate and have Certbot edit your Nginx configuration automatically to serve it, turning on HTTPS access in a single step.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot --nginx</span><br></pre></td></tr></table></figure></p>
<p>Or, just get a certificate<br>If you’re feeling more conservative and would like to make the changes to your Nginx configuration by hand, run this command.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo certbot certonly --nginx</span><br></pre></td></tr></table></figure></p></div><a href="/2021/08/03/nginx设置https/" class="read-more">READ MORE</a></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2021/07/29/为iterm2设置代理/" class="post-title-link">为iterm2设置代理</a></h2><div class="post-info">Jul 29, 2021</div><div class="post-content"><ol>
<li>设置终端代理<br>最新的 ShadowsocksX-NG 已经支持终端代理, 我们可以如下图复制得出:</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export http_proxy=http://127.0.0.1:1081;export https_proxy=http://127.0.0.1:1081;</span><br></pre></td></tr></table></figure>
<img src="/2021/07/29/为iterm2设置代理/1.png" title="This is an image">
<p>为了方便, 我们可以制作一下别名</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">alias setproxy=&apos;export http_proxy=&quot;http://127.0.0.1:8001&quot;; export HTTP_PROXY=&quot;http://127.0.0.1:8001&quot;; export https_proxy=&quot;http://127.0.0.1:8001&quot;; export HTTPS_PROXY=&quot;http://127.0.0.1:8001&quot;&apos; # 设置终端代理</span><br><span class="line"></span><br><span class="line">alias unproxy=&apos;unset http_proxy https_proxy&apos; # 取消终端代理</span><br><span class="line"></span><br><span class="line">alias ip=&apos;curl cip.cc&apos; # 测试</span><br></pre></td></tr></table></figure></div><a href="/2021/07/29/为iterm2设置代理/" class="read-more">READ MORE</a></article></div><div class="post-list-item"><article class="post-block"><h2 class="post-title"><a href="/2021/04/14/nginx-之-proxy-pass详解/" class="post-title-link">nginx 之 proxy_pass详解</a></h2><div class="post-info">Apr 14, 2021</div><div class="post-content"></div><a href="/2021/04/14/nginx-之-proxy-pass详解/" class="read-more">READ MORE</a></article></div></div></div><div id="sidebar" class="left"><div id="about-panel"><div class="info"><div class="title">marsland</div><div class="url">https://blog.qzcool.xyz</div><div class="bio">follow your heart</div></div><img src="/images/avatar.png" class="avatar"></div><div id="friend-links-panel"><div class="panel-title"><p>LINKS</p></div><a href="http://powman.org" target="_blank" class="link-item"><div class="link-container"><div class="site-name">AngryPowman</div><div class="site-desc">This is a link</div></div></a></div></div></div><div class="clear"></div></main><footer class="footer-container"><div class="paginator"><a href="/page/2/" class="next">NEXT</a></div><div class="copyright"><p>© 2017 - 2022 <a href="https://blog.qzcool.xyz">marsland</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/AngryPowman/hexo-theme-prontera" target="_blank">hexo-theme-prontera</a>.</p></div></footer><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"fishman",'auto');ga('send','pageview');</script></body></html>